/*! fireNav (0.4.0) (C) 2015 - 2019 CJ O'Hara. MIT @license: en.wikipedia.org/wiki/MIT_License */(function(){'use strict';(function(a,b,c,d){function e(b,c){this.$el=a(b),this.options=c,this._attribures=j.getData(this.$el.data()),this.options=a.extend({},g,c,this._attribures),this.init()}function f(b,c){this.$el=a(b),this.options=c,this._attribures=j.getData(this.$el.data()),this.options=a.extend({},h,c,this._attribures),this.init()}var g={jumpItemTemplate:"<li class=\"firenav-jump-section-item\">{{ jump_link }}</li>",jumpLinkClass:"firenav-jump-link",jumpSectionActiveClass:"firenav-jump-active",jumpSectionTemplate:"<ul class=\"firenav-jump-section-{{ depth }}\"></ul>",offset:0,speed:800,selector:".firenav-section",updateHash:!1,watchScroll:!0},h={activeTabClass:"firenav-tab-active",activeTabLinkClass:"firenav-tab-link-active",loadHash:!0};e.prototype={init:function(){var b=this;return"undefined"===a.type(a.Velocity)?(console.log("%cWARNING: fireSlider requires velocity.js to run correctly.","background: #E82C0C; color: white; padding: 0 12px;"),!1):!!b.options.selector&&(b.options.sections=a(b.options.selector),!!b.createSectionIds()&&void(b.jumpLinks=a(),b.constructJumpNav(),b.options.updateHash?b.loadWindowHash():b.updateActiveSection(),b.addJumpNavClickEvents(),b.initFunctions(),b.bindEvents()))},createSectionIds:function(){var b=this;return b.options.sections.each(function(c){var d=a(this).data(),e=d.firenavJumpName?d.firenavJumpName:"",f=a(this).parents(b.options.selector).first(),g=j.cleanString(e);if(g=f.length&&f[0]&&f[0].id?f[0].id+"-"+g:g,g=a(this)[0].id?a(this)[0].id:g,a(this).attr("id",g),""===a(this)[0].id&&""===g)return console.log("%cWARNING: Neither \"data-firenav-jump-name\" or \"id\" was found on section "+(c+1)+".","background: #E82C0C; color: white; padding: 0px 12px;"),!1}),!0},constructJumpNav:function(){var a=this,b=a.createNavListSection(0);a.loadSections(0,a.options.sections,b,a.options.selector),a.$el.append(b)},createNavListSection:function(b){var c=this,d=c.parseJumpSectionTemplateTags(c.options.jumpSectionTemplate,b);return a(d)},parseJumpSectionTemplateTags:function(a,b){var c=a,d=j.getTemplateTagRegex("depth");return-1!==c.search(d)&&(c=c.replace(d,(b+1).toString())),c},loadSections:function(a,b,c,d){var e=this,f=e.getSectionAtDepth(a,b,d);0===f.length||(e.processSection(a,f,c,d),a++,e.loadSections(a,b,c,d))},getSectionAtDepth:function(b,c,d){var e=a();return c.each(function(){a(this).parents(d).length===b&&(e=e.add(a(this)))}),e},processSection:function(b,c,d,e){var f=this;c.each(function(){var c=f.createNavListItem(a(this),b);0<a(this).find(e).length&&c.append(f.createNavListSection(b));var g=a(this).parents(e).first();if(0<g.length){var h="#"+g[0].id,i=d.find("a[href=\""+h+"\"]").parent(),j=i.find("ul");j.append(c)}else d.append(c)})},createNavListItem:function(b,c){var d=this,e=a(d.parseJumpItemTemplateTags(b,d.options.jumpItemTemplate,c));return d.jumpLinks=d.jumpLinks.add(e),e},parseJumpItemTemplateTags:function(a,b,c){var d=this,e=a.data(),f=b,g=j.getTemplateTagRegex("depth");-1!==f.search(g)&&(f=f.replace(g,(c+1).toString()));var h=j.getTemplateTagRegex("jump_link");if(-1!==f.search(h)){var i="#"+a.get(0).id,k=e.firenavJumpName?e.firenavJumpName:a.get(0).id,l=d.options.jumpLinkClass;f=f.replace(h,"<a href=\""+i+"\" class=\""+l+"\">"+k+"</a>")}var m=j.getTemplateTagRegex("jump_name");if(-1!==f.search(m)){var n=e.firenavJumpName?e.firenavJumpName:a.get(0).id;f=f.replace(m,n)}return f},loadWindowHash:function(){var c=this,e=b.location.hash;c.jumpLinks.each(function(){a(this).find("a").attr("href")===e&&(c.activeSection=a(e))}),c.updateActiveLinkClass(d,c.activeSection,c.options.jumpSectionActiveClass)},updateActiveSection:function(){var b=this,c=b.getActiveSection();if(!(b.activeSection instanceof jQuery)||!b.activeSection.is(c)){var d=b.activeSection?b.activeSection:a();b.activeSection=c,b.updateActiveLinkClass(d,c,b.options.jumpSectionActiveClass)}},getActiveSection:function(){var b=this,c=-1,d=a();return b.options.sections.each(function(){var e=Math.floor,f=a(this).get(0).getBoundingClientRect().top+b.options.offset;0>=e(f)&&(f>c||-1===c)&&(c=f,d=a(this))}),d},updateActiveLinkClass:function(b,c,d){var e=this;if(e.jumpLinks.each(function(){b&&a(this).find("a").attr("href")==="#"+b.attr("id")&&a(this).removeClass(d),c&&a(this).find("a").attr("href")==="#"+c.attr("id")&&a(this).addClass(d)}),c&&0<c.length){var f=c.data(),g=f.firenavJumpClass?f.firenavJumpClass:"";""!==e.activeJumpClass&&e.$el.removeClass(e.activeJumpClass),""!==g&&(e.activeJumpClass=g,e.$el.addClass(g))}},addJumpNavClickEvents:function(){var b=this;b.jumpLinks.find("a").each(function(){a(this).click(function(c){c.preventDefault(),b.options.sections.filter(a(this).attr("href")).velocity("scroll",{duration:b.options.speed,easing:"ease-in-out",offset:b.options.offset,complete:function(){var c=b.activeSection;a(this).is(c)||(b.activeSection=a(this),b.updateActiveLinkClass(c,a(this),b.options.jumpSectionActiveClass)),b.updatePageUrl("#"+a(this).attr("id"))}})})})},updatePageUrl:function(a){var c=this;c.options.updateHash&&(history.replaceState?history.replaceState(d,d,a):b.location.replace&&b.location.replace(a))},initFunctions:function(){var c=this;c.destroy=function(){c.$el.trigger("fireNav:jump:destroy")},a(b).scroll(function(){c.$el.trigger("fireNav:jump:scroll")})},bindEvents:function(){var a=this;a.$el.on("fireNav:jump:destroy",function(){a.unbindEvents(),a.$el.empty()}),a.$el.on("fireNav:jump:scroll",function(){var b=a.activeSection;a.updateActiveSection(),a.activeSection!==b&&a.options.updateHash&&0<a.activeSection.length&&a.updatePageUrl("#"+a.activeSection.get(0).id)})},unbindEvents:function(){var a=this;a.$el.off("fireNav:jump:scroll")}},f.prototype={init:function(){var c=this;c.options.tabs instanceof jQuery||(c.options.tabs=a(".tab")),this.constructTabNav(),this.addListeners(),this.options.tabs.css("display","none");var d=b.location.hash,e=this.$el.find("a[href=\""+d+"\"]"),f=this.options.tabs.filter(d);this.activeLink=this.options.loadHash&&e.length?e:this.$el.find("a").first(),this.activeTab=this.options.loadHash&&f.length?f:this.options.tabs.first(),this.updateActiveTab(this.activeLink,this.activeTab),this.initFunctions(),this.bindEvents()},constructTabNav:function(){var b=this,c=a("<ul></ul>");b.options.tabs.each(function(){var b=a(this).data(),d=b.firenavTab?b.firenavTab:"",e=j.cleanString(d);a(this).attr("id",e),c.append("<li><a href=\"#"+e+"\">"+d+"</a></li>")}),b.$el.append(c)},addListeners:function(){var c=this;c.$el.find("a").each(function(){a(this).click(function(f){f.preventDefault();var e=a(f.target).attr("href");c.updateActiveTab(a(f.target),c.options.tabs.filter(e)),c.options.loadHash&&(history.replaceState?history.replaceState(d,d,e):b.location.replace&&b.location.replace(e))})})},updateActiveTab:function(a,b){var c=this;c.activeLink&&c.activeLink instanceof jQuery&&c.activeLink.parent("li").removeClass(c.options.activeTabLinkClass),c.activeTab&&c.activeTab instanceof jQuery&&c.activeTab.css("display","none").removeClass(c.options.activeTabClass),b.css("display","block").addClass(c.options.activeTabClass),a.parent("li").addClass(c.options.activeTabLinkClass),c.activeLink=a,c.activeTab=b},initFunctions:function(){var a=this;a.destroy=function(){a.$el.trigger("fireNav:tabs:destroy")}},bindEvents:function(){var a=this;a.$el.on("fireNav:tabs:destroy",function(){a.$el.empty()})}};var j={cleanString:function(a){return a.toLowerCase().replace(/^\s+|\s+$/g,"").replace(/&#{0,1}[a-z0-9]+;/ig,"").replace(/[^\w\s]/gi,"").replace(/\s+/g,"-")},getData:function(b){return a.each(b,function(c){a.each(["fireNav","firenav","fire-nav"],function(a,d){if(-1<c.toLowerCase().indexOf(d)&&"fireNavJump"!==c&&"fireNavTabs"!==c){var e=c.replace(new RegExp(d,"gi"),"");e=e.charAt(0).toLowerCase()+e.slice(1),b[e]=b[c],delete b[c]}})}),b},getTemplateTagRegex:function(a){return new RegExp("{{\\s*"+a+"\\s*}}","g")}};a.fn.fireNavJump=function(b){return this.each(function(){a.data(this,"fireNavJump")&&(a(this).data("fireNavJump").destroy(),a(this).removeData("fireNavJump")),a.data(this,"fireNavJump",new e(this,b))})},a.fn.fireNavTabs=function(b){return this.each(function(){a.data(this,"fireNavTabs")&&(a(this).data("fireNavTabs").destroy(),a(this).removeData("fireNavTabs")),a.data(this,"fireNavTabs",new f(this,b))})},b.fireNavJump=e,b.fireNavTabs=f})(jQuery,window,document)})();
