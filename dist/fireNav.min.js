/*! fireNav (0.2.0) (C) 2014 CJ O'Hara. MIT @license: en.wikipedia.org/wiki/MIT_License */
var V=window.jQuery?$.Velocity:Velocity;!function(e,t,a){var n={};n.jump=function(e,i){function o(){for(var e=0;e<T.sections.length;e++){var t=n._utilities.getData(T.sections[e]),i=t.firenavJumpName?t.firenavJumpName:"",o=n._utilities.cleanString(i),s=n._utilities.getMathingParents(T.sections[e],T.options.section),r=s.length>0?s.shift():a;if("undefined"!=typeof r&&(o=r.id+"-"+o),T.sections[e].id=""!==T.sections[e].id?T.sections[e].id:o,""===T.sections[e].id&&""===o)return console.log('%cWARNING: Neither "data-firenav-jump-name" or "id" was found on section '+(e+1)+".","background: #E82C0C; color: white; padding: 0px 12px;"),!1}return!0}function s(e,t){var a=e,i=n._utilities.getTemplateTagRegex("depth");return-1!==a.search(i)&&(a=a.replace(i,(t+1).toString())),a}function r(e,t,a){var i=t,o=n._utilities.getData(e),s=n._utilities.getTemplateTagRegex("depth");-1!==i.search(s)&&(i=i.replace(s,(a+1).toString()));var r=n._utilities.getTemplateTagRegex("jump_link");if(-1!==i.search(r)){var l="#"+e.id,c=o.firenavJumpName?o.firenavJumpName:e.id,u=T.options.jumpLinkClass,p='<a href="'+l+'" class="'+u+'">'+c+"</a>";i=i.replace(r,p)}var d=n._utilities.getTemplateTagRegex("jump_name");if(-1!==i.search(d)){var f=o.firenavJumpName?o.firenavJumpName:e.id;i=i.replace(d,f)}return i}function l(e){var t=T.options.jumpSectionTemplate,a=s(t,e),i=n._utilities.createDomElementFromString(a);return i}function c(e,t){var a=(n._utilities.getData(e),T.options.jumpItemTemplate),i=r(e,a,t),o=n._utilities.createDomElementFromString(i);return T.jumpLinks.push(o),o}function u(e,t,a){for(var i=[],o=0;o<e.length;o++)n._utilities.getMathingParents(e[o],t).length===a&&i.push(e[o]);return i}function p(e,t,i,o){for(var s=0;s<e.length;s++){var r=c(e[s],o),u=e[s].querySelectorAll(t);if(u.length>0){var p=l(o);r.appendChild(p)}var f=n._utilities.getMathingParents(e[s],t),v=f.length>0?f.shift():a;d(v,r,i)}}function d(e,t,a){if("undefined"!=typeof e){var n="#"+e.id,i=a.querySelector('a[href="'+n+'"]').parentElement,o=i.querySelector("UL");o.appendChild(t)}else a.appendChild(t)}function f(e,t,a,n){var i=u(t,n,e);0!==i.length&&(p(i,n,a,e),e++,f(e,t,a,n))}function v(){var e=0,t=T.sections,a=l(0),n=T.options.section;f(e,t,a,n),T.nav.appendChild(a)}function m(e){for(var t=null,a=-1,i=0;i<e.length;i++){var o=n._utilities.getScrollTop(e[i]);Math.floor(o)<=T.options.offset&&(o>a||-1===a)&&(a=o,t=e[i])}return t}function h(e){for(var t=0;t<T.jumpLinks.length;t++){var a=T.jumpLinks[t],i=a.querySelector("a");e.prevNode&&i.hash==="#"+e.prevNode&&n._utilities.removeClass(a,e.className),e.nextNode&&i.hash==="#"+e.nextNode&&n._utilities.addClass(a,e.className)}var o=document.getElementById(e.nextNode);if(o){var s=n._utilities.getData(o),r=s.firenavJumpClass?s.firenavJumpClass:"";""!==T.activeJumpClass&&n._utilities.removeClass(T.nav,T.activeJumpClass),""!==r&&(T.activeJumpClass=r,n._utilities.addClass(T.nav,r))}}function g(){if(T.activeHashNode!==m(T.sections)){var e=T.activeHashNode;T.activeHashNode=m(T.sections),h({prevNode:e?e.id:null,nextNode:T.activeHashNode?T.activeHashNode.id:null,className:T.options.jumpSectionActiveClass})}}function C(){for(var e=t.location.hash,a=e.split("#")[1],i=document.getElementById(a),o=0;o<T.jumpLinks.length;o++){var s=T.jumpLinks[o],r=s.querySelector("a");r.hash===e&&(n._utilities.addClass(s,T.options.jumpSectionActiveClass),T.activeHashNode=i)}if(i){var l=n._utilities.getData(i),c=l.firenavJumpClass?l.firenavJumpClass:"";""!==T.activeJumpClass&&n._utilities.removeClass(T.nav,T.activeJumpClass),""!==c&&(T.activeJumpClass=c,n._utilities.addClass(T.nav,c))}}function N(e){n._utilities.listen(e,"click",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var n=e.target?e.target:e.srcElement,i=document.querySelector(n.hash);_=!0,V(i,"scroll",{duration:T.options.speed,easing:"ease-in-out",offset:T.options.offset,complete:function(){if(T.watchScroll=!1,T.activeHashNode!==i){var e=T.activeHashNode;T.activeHashNode=i,h({prevNode:e?e.id:null,nextNode:T.activeHashNode?T.activeHashNode.id:null,className:T.options.jumpSectionActiveClass})}setTimeout(function(){T.options.updateHash&&(history.replaceState?history.replaceState(a,a,"#"+T.activeHashNode.id):t.location.replace&&t.location.replace("#"+T.activeHashNode.id)),T.watchScroll=!0},20),_=!1}})})}function y(){for(var e=0;e<T.jumpLinks.length;e++){var t=T.jumpLinks[e].querySelector("a");N(t)}}function b(){T.options.watchScroll&&n._utilities.listen(t,"scroll",function(){T.watchScroll&&(g(),T.options.updateHash&&!_&&(history.replaceState?history.replaceState(a,a,"#"+T.activeHashNode.id):t.location.replace&&t.location.replace("#"+T.activeHashNode.id)))})}function S(){o()&&(v(),T.options.updateHash?(C(),setTimeout(function(){y(),b()},5)):(g(),y(),b()))}if("undefined"==typeof V)return void console.log("%cWARNING: fireNav requires velocity.js to run correctly.","background: #E82C0C; color: white; padding: 0 12px;");var _=!1,T={activeHashNode:null,activeJumpClass:"",jumpLinks:[],nav:{},options:{},selector:"",sections:[],watchScroll:!0};if(T.selector=e,T.nav=document.querySelector(T.selector),"undefined"!=typeof T.nav){var L={jumpItemTemplate:'<li class="firenav-jump-section-item">{{ jump_link }}</li>',jumpLinkClass:"firenav-jump-link",jumpSectionActiveClass:"firenav-jump-active",jumpSectionTemplate:'<ul class="firenav-jump-section-{{ depth }}"></ul>',offset:0,section:".firenav-section",speed:800,updateHash:!1,watchScroll:!0},j=n._utilities.getData(T.nav);T.data={jumpItemTemplate:j.firenavJumpItemTemplate,jumpLinkClass:j.firenavJumpLinkClass,jumpSectionActiveClass:j.firenavJumpSectionActiveClass,jumpSectionTemplate:j.firenavJumpSectionTemplate,offset:j.firenavOffset?parseInt(j.firenavOffset):a,section:j.firenavSection,speed:j.firenavSpeed?parseInt(j.firenavSpeed):a,updateHash:j.firenavUpdateHash?n._utilities.getBoolean(j.firenavUpdateHash):a,watchScroll:j.firenavWatchScroll?n._utilities.getBoolean(j.firenavWatchScroll):a},n._utilities.removeUndefined(T.data);var w=n._utilities.extend(T.data,i);if(T.options=n._utilities.extend(w,L),T.sections=document.querySelectorAll(T.options.section),0!==T.sections.length)return S(),T}},n.tabs=function(e,i){function o(){for(var e=document.createElement("UL"),t=0;t<u.tabs.length;t++){var a=document.createElement("LI"),i=document.createElement("A"),o=n._utilities.getData(u.tabs[t]),s=o.firenavTab?o.firenavTab:"",r=n._utilities.cleanString(s);u.tabs[t].id=r,i.text=s,i.href="#"+r,a.appendChild(i),e.appendChild(a),u.tabLinks.push(a)}u.nav.appendChild(e)}function s(e){u.currentIndex>-1&&(u.tabs[u.currentIndex].style.display="none",n._utilities.removeClass(u.tabs[u.currentIndex],u.options.activeTabClass),n._utilities.removeClass(u.tabLinks[u.currentIndex],u.options.activeTabLinkClass)),u.tabs[e].style.display="block",n._utilities.addClass(u.tabs[e],u.options.activeTabClass),n._utilities.addClass(u.tabLinks[e],u.options.activeTabLinkClass),u.currentIndex=e}function r(e){n._utilities.listen(e,"click",function(i){i.preventDefault?i.preventDefault():i.returnValue=!1,s(n._utilities.getNodeIndex(e.parentNode)),u.options.loadHash&&(history.replaceState?history.replaceState(a,a,e.hash):t.location.replace&&t.location.replace(e.hash))})}function l(e){for(var t=0;t<u.tabs.length;t++)if(u.tabs[t].id===e.replace("#",""))return t;return-1}function c(){o();for(var e=0;e<u.nav.getElementsByTagName("a").length;e++){var a=u.nav.getElementsByTagName("a")[e];r(a)}for(e=0;e<u.tabs.length;e++)u.tabs[e].style.display="none";var n=l(t.location.hash);s(u.options.loadHash&&n>-1?n:0)}var u={currentIndex:-1,data:{},nav:{},options:{},selector:"",tabLinks:[],tabs:[]};if(u.selector=e,u.nav=document.querySelector(u.selector),"undefined"!=typeof u.nav){var p={activeTabClass:"firenav-tab-active",activeTabLinkClass:"firenav-tab-link-active",loadHash:!0,tab:".tab"},d=n._utilities.getData(u.nav);u.data={activeTabClass:d.firenavActiveTabClass,activeTabLinkClass:d.firenavActiveTabLinkClass,loadHash:d.firenavLoadHash?n._utilities.getBoolean(d.firenavLoadHash):a,tab:d.firenavTab},n._utilities.removeUndefined(u.data);var f=n._utilities.extend(u.data,i);if(u.options=n._utilities.extend(f,p),u.tabs=document.querySelectorAll(u.options.tab),0!==u.tabs.length)return c(),u}},n._utilities={addClass:function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},cleanString:function(e){return e.toLowerCase().replace(/^\s+|\s+$/g,"").replace(/&#{0,1}[a-z0-9]+;/gi,"").replace(/[^\w\s]/gi,"").replace(/\s+/g,"-")},createDomElementFromString:function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild},extend:function(e,t){var a=e||{},n=t||{};for(var i in n)n.hasOwnProperty=n.hasOwnProperty||Object.prototype.hasOwnProperty,n.hasOwnProperty(i)&&!a.hasOwnProperty(i)&&(a[i]=n[i]);return a},formatDataKey:function(e){var t=[];e=e.replace("data-",""),e=e.split("-"),t[0]=e[0];for(var a=1;a<e.length;a++)t.push(e[a].charAt(0).toUpperCase()+e[a].substr(1).toLowerCase());return t.join("")},getBoolean:function(e){return"true"===e.toLowerCase()},getData:function(e){if(e.dataset)return e.dataset;for(var t=e.attributes,a={},i=t.length;i--;)if(/^data-.*/.test(t[i].name)){var o=n._utilities.formatDataKey(t[i].name),s=e.getAttribute(t[i].name);a[o]=s}return a},getMathingParents:function(e,t){var a=[];for(e="undefined"!=typeof e.parentNode?e.parentNode:e;e;)n._utilities.matchesSelector(e,t)&&a.push(e),e=e.parentNode;return a},getNodeIndex:function(e){var t=0;if(null!==e){for(;e=e.previousSibling;)3==e.nodeType&&/^\s*$/.test(e.data)||t++;return t}return-1},getScrollLeft:function(e){return e.getBoundingClientRect().left},getScrollTop:function(e){return e.getBoundingClientRect().top},getTemplateTagRegex:function(e){return new RegExp("{{\\s*"+e+"\\s*}}","g")},getWindowScrollLeft:function(){var e=0;return e="pageXOffset"in t?t.pageXOffset:document.documentElement.scrollLeft/n._utilities.getZoomAmount()},getWindowScrollTop:function(){var e=0;return e="pageXOffset"in t?t.pageYOffset:document.documentElement.scrollTop/n._utilities.getZoomAmount()},getZoomAmount:function(){var e=1;if(document.body.getBoundingClientRect){var t=document.body.getBoundingClientRect(),a=t.right-t.left,n=document.body.offsetWidth;e=a/n}return e},hasClass:function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)},htmlEvents:{onload:1,onunload:1,onblur:1,onchange:1,onfocus:1,onreset:1,onselect:1,onsubmit:1,onabort:1,onkeydown:1,onkeypress:1,onkeyup:1,onclick:1,ondblclick:1,onmousedown:1,onmousemove:1,onmouseout:1,onmouseover:1,onmouseup:1},listen:function(e,t,a){e.listenListener?e.listenListener(t,a,!1):e.attachEvent&&n._utilities.htmlEvents["on"+t]?e.attachEvent("on"+t,a):e["on"+t]=a},matchesSelector:function(e,t){for(var a=document.querySelectorAll(t),n=0;n<a.length;n++)if(a[n]===e)return!0;return!1},parseJson:function(e){var t;try{t=JSON.parse(e)}catch(a){t=e}return t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},removeUndefined:function(e){for(var t in e)"undefined"==typeof e[t]&&delete e[t]}},t.FireNav=n}(window.FireNav=window.FireNav||{},window),window.jQuery&&!function(){$.fn.fireNavJump=function(e){var t=FireNav.jump(this.selector,e);return $(t)},$.fn.fireNavTabs=function(e){var t=FireNav.tabs(this.selector,e);return $(t)}}(window.jQuery);